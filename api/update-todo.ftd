-- import: fastn/processors as pr
-- import: todo-app/api/models

-- models.todo data:
$processor$: pr.request-data

-- integer status:
$processor$: pr.package-query
db: db.sqlite
id: $data.id
complete: $data.complete
todo: $data.todo

UPDATE "todos" SET complete = $complete::INTEGER, todo = $todo::TEXT WHERE id = $id::INTEGER;

-- ftd.text: Todo updated
text if { status == 1 }: Something went wrong

-- ftd.redirect: /
code: 302
