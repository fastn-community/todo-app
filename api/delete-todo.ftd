-- import: fastn/processors as pr

-- record r-data:
integer id:

-- r-data data:
$processor$: pr.request-data

-- integer status:
$processor$: pr.package-query
db: db.sqlite
id: $data.id

DELETE FROM todos WHERE id = $id::INTEGER;

-- ftd.text: Todo deleted
text if { status == 1 }: Something went wrong

-- ftd.redirect: /
code: 302
